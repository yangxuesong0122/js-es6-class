<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <button>获取验证码</button>
  <button>获取验证码</button>
  <button>获取验证码</button>
  <script>
    function fn(a, b) {
      console.log(this)
      console.log(a + b)
    }
    let o = {
      name: 'yxs'
    }
    fn()
    // bind方法可以改变this的指向，但它会返回一个新的函数,新函数不会自动调用
    let newFn = fn.bind(o, 1, 2)
    newFn()

    // 有的函数不需要立即调用，但是又想改变这个函数内部的this指向，此时可以用bind
    // bind方法实际应用：点击获取验证码后，xx秒后可再次获取验证码
    // let btn = document.querySelector('button')
    // btn.onclick = function() {
    //   console.log(this)
    //   btn.innerHTML = '2秒后可再次获取'
    //   btn.disabled = true
    //
    //   // 默认情况下定时器中的this指向的是window,此时需要修改this的指向
    //   // 方法一：
    //   // let that = this
    //   // setTimeout(function() {
    //   //   that.disabled = false
    //   //   that.innerHTML = '获取验证码'
    //   // }, 2000)
    //
    //   // 方法二： 通过bind方法修改定时器内部的this，使其指向Button按钮
    //   setTimeout(function() {
    //     this.disabled = false
    //     this.innerHTML = "获取验证码"
    //   }.bind(this), 2000)
    // }

    let btns = document.querySelectorAll('button')
    for (var i = 0; i < btns.length; i++) {
      btns[i].onclick = function () {
        this.disabled = true
        // 箭头函数
        // setTimeout(() => {
        //   this.disabled = false
        // }, 1000)
        // bind改变this指向
        setTimeout(function () {
          this.disabled = false
        }.bind(this), 1000)
      }
    }
  </script>
</body>
</html>